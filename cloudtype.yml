name: ai-diary-pwa
app: web
buildpack: nodejs
build:
  commands:
    - npm install
    - npm run build
run:
  commands:
    - npx serve -s out -p 8080
context:
  git:
    url: https://github.com/OckJuYong/CEEo.git
    branch: main
  environment:
    - key: NODE_ENV
      value: production
    # Firebase 설정 - CloudType 환경 변수에서 설정
    - key: NEXT_PUBLIC_FIREBASE_API_KEY
      value: ${FIREBASE_API_KEY}
    - key: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
      value: ${FIREBASE_AUTH_DOMAIN}
    - key: NEXT_PUBLIC_FIREBASE_PROJECT_ID
      value: ${FIREBASE_PROJECT_ID}
    - key: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
      value: ${FIREBASE_STORAGE_BUCKET}
    - key: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
      value: ${FIREBASE_MESSAGING_SENDER_ID}
    - key: NEXT_PUBLIC_FIREBASE_APP_ID
      value: ${FIREBASE_APP_ID}
    # OpenAI API 키 - CloudType 환경 변수에서 설정
    - key: NEXT_PUBLIC_OPENAI_API_KEY
      value: ${OPENAI_API_KEY}
port: 8080